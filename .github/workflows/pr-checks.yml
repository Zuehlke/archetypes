name: PR Checks

on:
  pull_request:
    branches: [ main ]

jobs:
  lint-and-build:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Install uv
        uses: astral-sh/setup-uv@v6
      
      - name: Install Just
        uses: extractions/setup-just@v2

      - name: Run duplicate topic check
        run: uv run python3 scripts/check_duplicate_topics.py
      
      - name: Run linting
        run: just fmt
      
      - name: Build site
        run: just build
